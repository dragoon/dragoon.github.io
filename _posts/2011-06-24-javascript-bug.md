---
layout: post
title: "Javascript bug"
date: 2011-06-24
comments: false
categories:
 - sciencewise
 - bug
---


Сегодня почти целый день провозился с занятным багом Javascript, допущенным, как обычно, по незнанию.
Суть  токова: в Javascript существует функция setTimeout, позволяющая  отложенно запускать функцию (по истечении определённого времени). Так  вот, у этой функции возможны 2 варианты передачи аргумента, задающего  функцию:
<ol><li>setTimeout("function()", 1000);</li><li>setTimeout(function, 1000);</li></ol>Не  очень сильное различие, но на самом деле с первым вариантом дела  обстоят очень и очень плохо, и такой синтаксис никогда не надо  использовать. В первом случае происходит вычисление результата  выполнения передаваемой функции, и производится оно только 1 РАЗ (!),  после первого раза функция больше НИКОГДА не вызывается до следующей  перезагрузки страницы. Это обстоятельство очень долго вводило меня в  заблуждения, так как я включил логгинг запроса на стороне сервера, и  сообщение действительно возникало только один раз - при первом запросе,  однако я неверно начал предполагать что дело в каком-либо кэше, и только  через несколько часов случайно догадался поэкспериментировать с  Javascript.
